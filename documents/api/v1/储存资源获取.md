# 储存资源获取

## 接口地址
```
/api/v1/storages/{storage}/{process?}
```

## 请求方式
```
GET
```

## 接口变量
| name     | must     | description |
|----------|:--------:|:--------:|
| storage  | yes      | 要获取的附件唯一标识 |
| process  | no       | 用于图片quality，crop，reseze操作参数

### process
裁剪说明:示例process参数
```json5
{"crop":{"w":100,"h":100,'x':0,y:0},"quality":80,"resize":{"w":100,"h":100}}
```

| name     | must     | description |
|----------|:--------:|:--------:|
| crop     | no       | 裁剪图片  |
| quality  | no       | 质量转换  |
| resize   | no       | 设置尺寸  |

上面的process包含了所有可传递的参数如下挨个说,参数的所有值都应该是int.

#### crop
裁剪图片

| name     | must     | description |
|----------|:--------:|:--------:|
| w        | yes      | 宽度      |
| h        | yes      | 高度     |
| x        | no       | 裁剪起点x轴 |
| y        | no       | 裁剪起点y轴 |

#### quality
直接设值，范围`1`-`100`

#### resize
重置图片尺寸

| name     | must     | description |
|----------|:--------:|:--------:|
| w        | yes      | 宽度      |
| h        | yes      | 高度     |

### 参数拼装指南：
可能你发现了`process`变量是一段`json`,正是如此，所以才有拼装指南，如下：

1. 创建一个json对象
2. 针对需要的参数设值
3. 将json对象转成压缩后的json格式字符串

### ⚠️
process参数是可选，可选，可选，一定要记住是可选，如果不传递process，将返回源文件，如果是非图片附件，则直接返回源文件，process参数将无效，换句话说，process参数只对图片附件有效。

process字段的因为是json格式，client可以可选的进行url encode处理.

#### 转换支持文件拓展名
- png
- jpg
- jpeg
- webp

gif本身不支持裁剪～将不会对gif处理～

## 获取说明
请求接口后，接口会发出302状态，重定向到真实资源地址，以此兼容云储存。

